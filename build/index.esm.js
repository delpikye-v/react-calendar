import e,{useRef as a,useEffect as t,useState as n}from"react";import r from"joinclass";var o=function(a){var t=a.value,n=a.className,o=a.disabled,l=a.display,c=a.isSelected,i=a.neighbor,s=a.setSelected;return e.createElement("span",{className:r("picker-cell month-year-cell",n,o&&"disabled-over-range-time",c&&"date-is-today",i&&"date-neighbor-target"),onClick:function(){return s(t)},onTouchCancel:function(){return s(t)},"aria-readonly":"true"},l||t)},l=function(e){return null==e},c=function(e,a){void 0===a&&(a=50),e&&(e.classList.add("fade"),setTimeout((function(){return e.classList.remove("fade")}),a))},i=function(e){var a=e.minYear,t=e.maxYear,n=e.notBeforeTime,r=e.notAfterTime,o=new Date,l=o.getFullYear();if(a||(a=l-100),t||(t=l+100),n){var c=n.getFullYear();a=a<c?c:a}else n=new Date(a,0,1);if(r){var i=r.getFullYear();t=t>i?i:t}else r=new Date(t,11,31);return a>t&&(a=t),!e.minimumDayCanLargeThanToday&&a>l&&(a=l,n=o),{minYear:a,maxYear:t,minMonth:n.getMonth(),maxMonth:r.getMonth(),notBeforeTime:n,notAfterTime:r,beforeYearMonth:y([n.getFullYear(),n.getMonth()]),afterYearMonth:y([r.getFullYear(),r.getMonth()]),beforeAll:f(n.getFullYear(),n.getMonth(),n.getDate()),afterAll:f(r.getFullYear(),r.getMonth(),r.getDate())}},s=function(e,a){return e.reduce((function(e,t,n){return(n%a==0?e.push([t]):e[e.length-1].push(t))&&e}),[])},u=function(e,a){return a>11?(e++,a=0):a<0&&(e--,a=11),[e,a]},m=function(e,a,t,n,r){if(!n&&!r)return!1;var o=f(e,a,t);return r>0&&n>0?!(n<=o&&o<=r):r>0&&o>r||n>0&&o<n},d=function(e){return[31,e%4==0&&e%100!=0||e%400==0?29:28,31,30,31,30,31,31,30,31,30,31]},h=function(e,a){var t=u(e,a),n=t[0],r=t[1];return{year:n,month:r,maxDayOfMonth:d(n)[r],otherMonth:!0}},f=function(e,a,t){var n=e+"0".concat(a).slice(-2)+"0".concat(t).slice(-2);return Number(n)},y=function(e){var a=e[0]+"0".concat(e[1]).slice(-2);return Number(a)},v=function(e){var a=Number("".concat(e.toString()[2],"0")),t=e.toString().substring(0,2);return[a=Number(0===a?"".concat(t,"00"):"".concat(t).concat(a)),a+9]},g=["January","February","March","April","May","June","July","August","September","October","November","December"],p=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],N=[{name:"Sunday",shortName:"Su",dateClassName:"date-cell-sunday",keyName:"sun"},{name:"Monday",shortName:"Mo",dateClassName:"date-cell-monday",keyName:"mon"},{name:"Tuesday",shortName:"Tu",dateClassName:"date-cell-tuesday",keyName:"tue"},{name:"Wednesday",shortName:"We",dateClassName:"date-cell-wednesday",keyName:"wed"},{name:"Thursday",shortName:"Th",dateClassName:"date-cell-thursday",keyName:"thu"},{name:"Friday",shortName:"Fr",dateClassName:"date-cell-friday",keyName:"fri"},{name:"Saturday",shortName:"Sa",dateClassName:"date-cell-saturday",keyName:"sat"}],k=N.map((function(e){return e.dateClassName})),b=function(a){var t=a.weekLabels,n=void 0===t?[]:t,o=a.dayOfWeeks,l=void 0===o?[]:o,c=a.readOnly,i=a.neighborMonthClassName,s=a.showToday,u=a.todayClassName,m=a.selectedClassName,d=a.handleChangeDate,h=a.formartDayValue;return e.createElement(e.Fragment,null,l.map((function(a,t){return e.createElement("div",{key:t,className:"date-row date-line",role:"row"},a.map((function(a,t){var o,l=a.fitMonthDay||c;return e.createElement("span",{key:t,className:r("picker-cell date-cell","date-cell-".concat(f(a.year,a.month+1,a.dayDisplay)),null===(o=n[t])||void 0===o?void 0:o.dateClassName,a.isBookmark&&"date-is-bookmark",a.otherMonth&&"date-neighbor-target",a.otherMonth&&i,a.isToday&&s&&"date-is-today",a.isToday&&u,!l&&a.isSelected&&"date-is-selected",!l&&a.isSelected&&m,l&&"read-only",!l&&a.isOverRange&&"disabled-over-range-time"),onClick:function(){return!l&&!a.isOverRange&&d(a)},onTouchEnd:function(){return!l&&!a.isOverRange&&d(a)},"aria-readonly":"true"},a.fitMonthDay?e.createElement(e.Fragment,null):h?h(a.dayDisplay):a.dayDisplay)})))})))},M=function(a){for(var t=a.decadeData,n=a.selected,r=a.minYear,l=a.maxYear,c=a.setSelected,i=void 0===c?function(){}:c,u=t[0],m=t[1],d=[],h=u-1;h<=m+1;h++)d.push(h);var f=s(d,3);return e.createElement(e.Fragment,null,f.map((function(a,t){return e.createElement("div",{key:t,className:"date-row",role:"row"},a.map((function(a,t){return e.createElement(o,{key:t,className:"year-cell-".concat(a),disabled:r>a||l<a,neighbor:a<u||a>m,isSelected:a===n,value:a,setSelected:i})})))})))},Y=function(a){var t=a.labelMonths,n=void 0===t?[]:t,l=a.selected,c=a.isSameYear,i=a.year,m=a.minYearMonth,d=a.maxYearMonth,h=a.setSelected,f=void 0===h?function(){}:h,v=s(n,3);return e.createElement(e.Fragment,null,v.map((function(a,t){return e.createElement("div",{key:t,className:"date-row",role:"row"},a.map((function(a,n){var s=3*t+n,h=y(u(i,s));return e.createElement(o,{key:n,className:r("month-year-cell-".concat(h),"month-cell-".concat(p[s])),disabled:m>h||d<h,isSelected:s===l&&c,display:a,value:s,setSelected:f})})))})))},C=function(a){var t=a.weekLabels,n=a.weekClassName,o=a.dayOfWeeks,l=void 0===o?[]:o,c=a.readOnly,i=a.neighborMonthClassName,s=a.showToday,u=a.todayClassName,m=a.selectedClassName,d=a.onClickWeekLabel,h=void 0===d?function(){}:d,f=a.handleChangeDate,y=a.formartDayValue;return e.createElement(e.Fragment,null,e.createElement("div",{className:"date-row date-label",role:"row"},t.map((function(a,t){return e.createElement("span",{key:t,className:r("week-label date-cell",a.dateClassName,n),onClick:function(){return h(a)},onTouchEnd:function(){return h(a)},"aria-readonly":"true"},a.shortName)}))),e.createElement(b,{weekLabels:t,dayOfWeeks:l,readOnly:c,neighborMonthClassName:i,showToday:s,todayClassName:u,selectedClassName:m,formartDayValue:y,handleChangeDate:f}))},D=function(){return D=Object.assign||function(e){for(var a,t=1,n=arguments.length;t<n;t++)for(var r in a=arguments[t])Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);return e},D.apply(this,arguments)};function T(e,a,t){if(t||2===arguments.length)for(var n,r=0,o=a.length;r<o;r++)!n&&r in a||(n||(n=Array.prototype.slice.call(a,0,r)),n[r]=a[r]);return e.concat(n||Array.prototype.slice.call(a))}"function"==typeof SuppressedError&&SuppressedError;var E=function(n){var o=n.currentDate,i=n.minYear,s=n.maxYear,u=n.minMonth,m=n.maxMonth,d=n.valueMonth,h=n.valueYear,f=n.className,y=n.i18nLabelMonth,v=n.minimumDayCanLargeThanToday,p=n.handleChange,N=a(null),k=a(null);if(t((function(){k.current&&c(k.current)}),[d]),t((function(){N.current&&c(N.current)}),[h]),l(d)||l(h))return null;var b=h===s?(y||g).slice(0,m+1):h===i?(y||g).slice(u):y||g,M=function(){var e,a=o.getFullYear();return i>s&&(i=(e=[s,i])[0],s=e[1]),(v&&i<a||a<i)&&(i=a),new Array(s-i+1).fill(0)}();return e.createElement("span",{className:r("date-picker2-select-month-year date-picker2-title-month-year",f)},e.createElement("span",{ref:k,className:"date-picker2-select-month"},e.createElement("select",{className:"date-picker2-select-month-control",value:d,onChange:function(e){c(e.target,100),p(h,Number(e.target.value))},"aria-hidden":!0},b.map((function(a,t){return e.createElement("option",{key:t,value:t},a)})))),e.createElement("span",{className:"date-picker2-select-split"}),e.createElement("span",{ref:N,className:"date-picker2-select-year"},e.createElement("select",{className:"date-picker2-select-year-control",value:h,onChange:function(e){c(e.target,100),p(Number(e.target.value),d)},"aria-hidden":!0},M.map((function(a,t){var n=s-t;return e.createElement("option",{key:n,value:n},n)})))))},w={8:1,7:0},x=function(o){var l=o.className,s=o.todayClassName,m=o.selectedClassName,h=o.neighborMonthClassName,p=o.labelMonthYearClassName,b=o.weekClassName,w=o.width,x=void 0===w?"300px":w,S=o.height,F=void 0===S?"300px":S,A=o.readOnly,B=void 0!==A&&A,L=o.show,W=void 0===L||L,V=o.showAnchor,j=void 0!==V&&V,R=o.labelNext,J=o.labelBack,I=o.weekStart,P=void 0===I?"sunday":I,q=o.fitMonthDay,z=void 0!==q&&q,G=o.notBeforeTime,H=o.notAfterTime,K=o.value,Q=o.bookmarkDates,U=void 0===Q?[]:Q,X=o.showToday,Z=void 0===X||X,$=o.i18nLabelWeek,_=o.i18nLabelMonth,ee=o.minYear,ae=o.maxYear,te=o.minimumDayCanLargeThanToday,ne=void 0!==te&&te,re=o.showMonthYearSelection,oe=void 0!==re&&re,le=o.showNextBack,ce=void 0===le||le,ie=o.onSelectedValue,se=void 0===ie?function(){}:ie,ue=o.onChangeView,me=void 0===ue?function(){}:ue,de=o.onClickWeekLabel,he=void 0===de?function(){}:de,fe=o.formatTittleYearMonth,ye=o.formartDayValue,ve=n(K||new Date),ge=ve[0],pe=ve[1],Ne=a(null),ke=a(!0),be=a({}),Me=n([]),Ye=Me[0],Ce=Me[1],De=n([]),Te=De[0],Ee=De[1],we=n([]),xe=we[0],Se=we[1],Fe=n("date"),Oe=Fe[0],Ae=Fe[1],Be=n([]),Le=Be[0],We=Be[1],Ve="date"===Oe,je="month"===Oe,Re="year"===Oe;t((function(){be.current=i({maxYear:ae,minYear:ee,notAfterTime:H,notBeforeTime:G,minimumDayCanLargeThanToday:ne});var e=K||new Date;K?ne||e<be.current.notBeforeTime&&(ke.current=!1,e=be.current.notBeforeTime):ne&&(ke.current=!1,e=new Date(be.current.minYear,be.current.minMonth,1)),pe(e),O(e.getFullYear(),e.getMonth(),e,be.current.notBeforeTime,be.current.notAfterTime,P,z,Ee,We,U,ke.current)}),[K,x,F,Z,G,H,_,B,z,ne,oe,P]),t((function(){var e=(Array.isArray($)&&7===$.length?$:N).map((function(e,a){return D(D({},e),{dateClassName:k[a]})}));Ce("monday"!==P?"saturday"!==P?"friday"!==P?e:T(T([],e.slice(-2),!0),e.slice(0,-2),!0):T(T([],e.slice(-1),!0),e.slice(0,-1),!0):T(T([],e.slice(1),!0),[e[0]],!1))}),[P,$]),t((function(){!W&&Ae("date")}),[W]);var Je,Ie,Pe=function(){var e="date";je&&(Se(v(Le[0])),e="year"),Ve&&(e="month"),Ae(e),me(e),c(Ne.current)},qe=function(e){c(Ne.current);var a=Le[0],t=Le[1];if(Re){var n=a+10*e;return Se(v(n)),void We([n,t])}var r=Ve||oe?u(a,t+e):u(a+e,t);O(r[0],r[1],ge,be.current.notBeforeTime,be.current.notAfterTime,P,z,Ee,We,U,ke.current)},ze=function(){var e=Le[0],a=Le[1];if(Re)return{disabledBack:xe[0]<be.current.minYear,disabledNext:xe[1]>be.current.maxYear};if(Ve){var t=d(e)[a];return{disabledBack:be.current.beforeAll>=f(e,a,1),disabledNext:be.current.afterAll<=f(e,a,t)}}var n=u(e,0),r=u(e,11);return{disabledBack:be.current.beforeYearMonth>=y(n),disabledNext:be.current.afterYearMonth<=y(r)}}(),Ge=ze.disabledBack,He=ze.disabledNext;return W?e.createElement("div",{style:{width:x,height:z?"auto":F},className:r("date-picker2",l)},e.createElement("div",{className:"date-picker2-header"},ce&&e.createElement("span",{className:r("date-picker2-nav-button button-left",Ge&&"button-disabled"),onClick:function(){return!Ge&&qe(-1)},onTouchEnd:function(){return!Ge&&qe(-1)}},J||e.createElement(e.Fragment,null,"〈")),j&&e.createElement("span",{className:"date-picker2-anchor left-label"}),oe?e.createElement(E,{className:p,currentDate:ge,maxYear:be.current.maxYear,minYear:be.current.minYear,minMonth:be.current.minMonth,maxMonth:be.current.maxMonth,valueYear:Le[0],valueMonth:Le[1],i18nLabelMonth:_,minimumDayCanLargeThanToday:ne,handleChange:function(e,a){O(e,a,ge,be.current.notBeforeTime,be.current.notAfterTime,P,z,Ee,We,U,ke.current)}}):e.createElement("span",{ref:Ne,className:r("date-picker2-title-month-year",Ve&&"date-picker2-title-month",je&&"date-picker2-title-year",Re&&"date-picker2-title-decade",p),"aria-hidden":!0},e.createElement("span",{className:"date-picker2-label-month-year",onClick:Pe,onTouchEnd:Pe},(Je=Le[0],Ie=Le[1],fe?je?fe(Je,-1):Re?fe(-1,-1,xe):fe(Je,Ie+1):je?Je||"":Re?"".concat(xe[0]," - ").concat(xe[1]):"".concat((_||g)[Ie]||""," ").concat(Je||"").trim()))),j&&e.createElement("span",{className:"date-picker2-anchor right-label"}),ce&&e.createElement("span",{className:r("date-picker2-nav-button button-right",He&&"button-disabled"),onClick:function(){return!He&&qe(1)},onTouchEnd:function(){return!He&&qe(1)}},R||e.createElement(e.Fragment,null,"〉"))),e.createElement("div",{className:"date-picker2-calendar",role:"grid"},Ve?e.createElement(C,{weekLabels:Ye,weekClassName:b,dayOfWeeks:Te,readOnly:B,showToday:Z,todayClassName:s,selectedClassName:m,neighborMonthClassName:h,onClickWeekLabel:he,handleChangeDate:function(e){if(!B){ke.current=!0;var a=new Date(e.year,e.month,e.dayDisplay,0,0,0);pe(a),se(a),O(e.year,e.month,a,be.current.notBeforeTime,be.current.notAfterTime,P,z,Ee,We,U,ke.current)}},formartDayValue:ye}):je?e.createElement(Y,{year:Le[0],labelMonths:_||g,minYearMonth:be.current.beforeYearMonth,maxYearMonth:be.current.afterYearMonth,selected:ge.getMonth(),isSameYear:ge.getFullYear()===Le[0],setSelected:function(e){var a=u(Le[0],e);O(a[0],a[1],ge,be.current.notBeforeTime,be.current.notAfterTime,P,z,Ee,We,U,ke.current),Ae("date"),me("date")}}):e.createElement(M,{decadeData:xe,selected:ge.getFullYear(),minYear:be.current.minYear,maxYear:be.current.maxYear,setSelected:function(e){We([e,Le[1]]),Ae("month"),me("month")}}))):e.createElement(e.Fragment,null)},S=function(e,a,t){return a===t.getDate()&&e.month===t.getMonth()&&e.year===t.getFullYear()},F=function(e,a,t,n){return void 0===n&&(n=[]),n.findIndex((function(n){return n.getFullYear()===e&&n.getMonth()===a&&n.getDate()===t}))>-1};function O(e,a,t,n,r,o,l,c,i,s,u){var y=new Date,v=y.getDate(),g=y.getMonth(),p=y.getFullYear(),N=new Date(e,a,1).getDay(),k=d(e)[a],b=h(e,a-1),M=h(e,a+1),Y=n?f(n.getFullYear(),n.getMonth(),n.getDate()):0,C=r?f(r.getFullYear(),r.getMonth(),r.getDate()):0;"monday"===o?N=0===N?6:N-1:"saturday"===o?N=w[N+=1]||N:"friday"===o&&(N=w[N+=2]||N);var E=[],x=[],O=1;if(0!==N||0===N&&28===k)for(var A=b.maxDayOfMonth-N+1;A<=b.maxDayOfMonth;A++)x.push(D(D({},b),{dayDisplay:A,isSelected:S(b,A,t),isOverRange:m(b.year,b.month,A,Y,C),fitMonthDay:l,isBookmark:F(b.year,b.month,A,s)}));var B=x.length;O=x.length,7===x.length&&(E.push(T([],x,!0)),x=[],O=1);for(A=1;A<=k;A++)x.push({year:e,month:a,maxDayOfMonth:k,dayDisplay:A,isToday:v===A&&g===a&&p===e,isSelected:S({year:e,month:a},A,t)&&u,isOverRange:m(e,a,A,Y,C),isBookmark:F(e,a,A,s)}),++O>=7&&(E.push(T([],x,!0)),x=[],O=0);var L=42-B-k;for(A=1;A<=L;A++)x.push(D(D({},M),{dayDisplay:A,isSelected:S(M,A,t),isOverRange:m(M.year,M.month,A,Y,C),fitMonthDay:l,isBookmark:F(M.year,M.month,A,s)})),++O>=7&&(E.push(T([],x,!0)),x=[],O=0);x.length>0&&E.push(T([],x,!0)),c(E),i([e,a])}export{o as CalendarCell,b as CalendarDayOfWeeks,M as CalendarDecade,Y as CalendarMonth,C as CalendarWeek,c as animateLabelChange,k as datesClassName,x as default,f as fmtYearMonthDateToNum,y as fmtYearMonthToNum,v as getDecadesFromYear,d as getMaxDayOfMonth,i as getMiMaxYear,h as getPreNextOfMonth,u as getRealYearMonth,l as isNil,m as isOverCompareDate,p as keyMonths,g as labelMonths,N as labelWeekDays,s as toMatrix};
