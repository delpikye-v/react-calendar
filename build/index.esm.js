import e,{useState as t,useRef as a,useEffect as n}from"react";import r from"joinclass";function o(t){var a=t.value,n=t.display,o=t.isSelected,l=t.neighbor,c=t.setSelected;return e.createElement("span",{className:r("picker-cell month-year-cell",o&&"date-is-today",l&&"date-neighbor-target"),onClick:function(){return c(a)},onTouchCancel:function(){return c(a)}},n||a)}var l=function(e,t){return e.reduce((function(e,a,n){return(n%t==0?e.push([a]):e[e.length-1].push(a))&&e}),[])},c=function(t){var a=t.labelMonths,n=void 0===a?[]:a,r=t.selected,c=t.isSameYear,s=t.setSelected,i=void 0===s?function(){}:s,u=l(n,3);return e.createElement(e.Fragment,null,u.map((function(t,a){return e.createElement("div",{key:a,className:"date-row",role:"row"},t.map((function(t,n){var l=3*a+n;return e.createElement(o,{key:n,isSelected:l===r&&c,display:t,value:l,setSelected:i})})))})))},s=function(t){for(var a=t.decadeData,n=t.selected,r=t.setSelected,c=void 0===r?function(){}:r,s=a[0],i=a[1],u=[],d=s-1;d<=i+1;d++)u.push(d);var m=l(u,3);return e.createElement(e.Fragment,null,m.map((function(t,a){return e.createElement("div",{key:a,className:"date-row",role:"row"},t.map((function(t,a){return e.createElement(o,{key:a,neighbor:t<s||t>i,isSelected:t===n,value:t,setSelected:c})})))})))},i=function(t){var a=t.dayOfWeeks,n=void 0===a?[]:a,o=t.readOnly,l=t.neighborMonthClassName,c=t.showToday,s=t.todayClassName,i=t.selectedClassName,u=t.handleChangeDate,d=t.formartDayValue;return e.createElement(e.Fragment,null,n.map((function(t,a){return e.createElement("div",{key:a,className:"date-row",role:"row"},t.map((function(t,a){var n=t.fitMonthDay||o;return e.createElement("span",{key:a,className:r("picker-cell date-cell",t.otherMonth&&"date-neighbor-target",t.otherMonth&&l,t.isToday&&c&&"date-is-today",t.isToday&&s,!n&&t.isSelected&&"date-is-selected",!n&&t.isSelected&&i,n&&"read-only",!n&&t.isOverRange&&"disabled-over-range-time"),onClick:function(){return!n&&!t.isOverRange&&u(t)},onTouchEnd:function(){return!n&&!t.isOverRange&&u(t)}},t.fitMonthDay?e.createElement(e.Fragment,null):d?d(t.dayDisplay):t.dayDisplay)})))})))},u=function(t){var a=t.weekLabels,n=t.weekClassName,o=t.dayOfWeeks,l=void 0===o?[]:o,c=t.readOnly,s=t.neighborMonthClassName,u=t.showToday,d=t.todayClassName,m=t.selectedClassName,h=t.onClickWeekLabel,y=void 0===h?function(){}:h,f=t.handleChangeDate,v=t.formartDayValue;return e.createElement(e.Fragment,null,e.createElement("div",{className:"date-row",role:"row"},a.map((function(t,a){return e.createElement("span",{key:a,className:r("week-label date-cell",n),"aria-readonly":"true",onClick:function(){return y(t)},onTouchEnd:function(){return y(t)}},t.shortName)}))),e.createElement(i,{dayOfWeeks:l,readOnly:c,neighborMonthClassName:s,showToday:u,todayClassName:d,selectedClassName:m,formartDayValue:v,handleChangeDate:f}))};function d(e,t){return t>11?(e++,t=0):t<0&&(e--,t=11),[e,t]}var m=function(e,t,a,n,r){if(!n&&!r)return!1;var o=f(e,t,a);return r>0&&n>0?!(n<=o&&o<=r):r>0&&o>r||n>0&&o<n};function h(e){return[31,e%4==0&&e%100!=0||e%400==0?29:28,31,30,31,30,31,31,30,31,30,31]}function y(e,t){var a=d(e,t),n=a[0],r=a[1];return{year:n,month:r,maxDayOfMonth:h(n)[r],otherMonth:!0}}function f(e,t,a){var n=e+"0".concat(t).slice(-2)+"0".concat(a).slice(-2);return Number(n)}function v(e){var t=Number("".concat(e.toString()[2],"0")),a=e.toString().substring(0,2);return[t=Number(0===t?"".concat(a,"00"):"".concat(a).concat(t)),t+9]}var g=["January","February","March","April","May","June","July","August","September","October","November","December"],p=[{name:"Sunday",shortName:"Sun"},{name:"Monday",shortName:"Mon"},{name:"Tuesday",shortName:"Tue"},{name:"Wednesday",shortName:"Wed"},{name:"Thursday",shortName:"Thu"},{name:"Friday",shortName:"Fri"},{name:"Saturday",shortName:"Sat"}],N=function(){return N=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},N.apply(this,arguments)};function k(e,t,a){if(a||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var b=function(o){var l=o.className,i=o.todayClassName,b=o.selectedClassName,D=o.neighborMonthClassName,E=o.labelMonthYearClassName,C=o.weekClassName,w=o.width,M=void 0===w?"300px":w,S=o.height,O=void 0===S?"300px":S,T=o.readOnly,F=void 0!==T&&T,Y=o.show,W=void 0===Y||Y,L=o.showAnchor,x=void 0!==L&&L,A=o.labelNext,V=o.labelBack,R=o.weekStart,j=void 0===R?"sunday":R,J=o.fitMonthDay,B=o.notBeforeTime,P=o.notAfterTime,q=o.value,z=o.showToday,G=void 0===z||z,H=o.i18nLabelWeek,I=o.i18nLabelMonth,K=o.onSelectedValue,Q=void 0===K?function(){}:K,U=o.onChangeView,X=void 0===U?function(){}:U,Z=o.onClickWeekLabel,$=void 0===Z?function(){}:Z,_=o.formatTittleYearMonth,ee=o.formartDayValue,te=t(q||new Date),ae=te[0],ne=te[1],re=a(null),oe=t([]),le=oe[0],ce=oe[1],se=t([]),ie=se[0],ue=se[1],de=t([]),me=de[0],he=de[1],ye=t("date"),fe=ye[0],ve=ye[1],ge=t([]),pe=ge[0],Ne=ge[1];n((function(){var e=q||new Date;ne(q||new Date),De(e.getFullYear(),e.getMonth(),e)}),[q,M,O,G,B,P,I,F,J]),n((function(){var e=Array.isArray(H)&&7===H.length?H:p;ce("monday"!==j?k([],e,!0):k(k([],e.slice(1),!0),[e[0]],!1))}),[j,H]),n((function(){!W&&ve("date")}),[W]);var ke,be,De=function(e,t,a){var n=new Date,r=n.getDate(),o=n.getMonth(),l=n.getFullYear(),c=new Date(e,t,1).getDay(),s=h(e)[t],i=y(e,t-1),u=y(e,t+1),d=function(e,t){return t===a.getDate()&&e.month===a.getMonth()&&e.year===a.getFullYear()},v=B?f(B.getFullYear(),B.getMonth(),B.getDate()):0,g=P?f(P.getFullYear(),P.getMonth(),P.getDate()):0;"monday"===j&&(0===c?c=6:c-=1);var p=[],b=[],D=1;if(0!==c||0===c&&28===s)for(var E=i.maxDayOfMonth-c+1;E<=i.maxDayOfMonth;E++)b.push(N(N({},i),{dayDisplay:E,isSelected:d(i,E),isOverRange:m(i.year,i.month,E,v,g),fitMonthDay:J}));var C=b.length;D=b.length,7===b.length&&(p.push(k([],b,!0)),b=[],D=1);for(E=1;E<=s;E++)b.push({year:e,month:t,maxDayOfMonth:s,dayDisplay:E,isToday:r===E&&o===t&&l===e,isSelected:d({year:e,month:t},E),isOverRange:m(e,t,E,v,g)}),++D>=7&&(p.push(k([],b,!0)),b=[],D=0);var w=42-C-s;for(E=1;E<=w;E++)b.push(N(N({},u),{dayDisplay:E,isSelected:d(u,E),isOverRange:m(u.year,u.month,E,v,g),fitMonthDay:J})),++D>=7&&(p.push(k([],b,!0)),b=[],D=0);b.length>0&&p.push(k([],b,!0)),ue(p),Ne([e,t])},Ee=function(){re.current.classList.add("fade"),setTimeout((function(){return re.current.classList.remove("fade")}),50)},Ce=function(){return"month"===fe?(he(v(pe[0])),ve("year"),Ee(),void X(fe)):"date"===fe?(ve("month"),Ee(),void X(fe)):void 0},we=function(e){Ee();var t=pe[0],a=pe[1];if("date"!==fe){if("year"===fe){var n=t+10*e;return he(v(n)),void Ne([n,a])}var r=d(t+e,a),o=r[0],l=r[1];De(o,l,ae)}else{var c=d(t,a+e),s=c[0],i=c[1];De(s,i,ae)}};return W?e.createElement("div",{style:{width:M,height:J?"auto":O},className:r("date-picker2",l)},e.createElement("div",{className:"date-picker2-header"},e.createElement("span",{className:"date-picker2-nav-button button-left",onClick:function(){return we(-1)},onTouchEnd:function(){return we(-1)}},V?e.createElement(e.Fragment,null,V):e.createElement(e.Fragment,null," 〈")),x&&e.createElement("span",{className:"date-picker2-anchor left-label"}),e.createElement("span",{ref:re,className:r("date-picker2-title-month-year",E),onClick:Ce,onTouchEnd:Ce},(ke=pe[0],be=pe[1],_?"month"===fe?_(ke,-1):"year"===fe?_(-1,-1,me):_(ke,be+1):"month"===fe?ke||"":"year"===fe?"".concat(me[0]," - ").concat(me[1]):"".concat((I||g)[be]||""," ").concat(ke||"").trim())),x&&e.createElement("span",{className:"date-picker2-anchor right-label"}),e.createElement("span",{className:"date-picker2-nav-button button-right",onClick:function(){return we(1)},onTouchEnd:function(){return we(1)}},A?e.createElement(e.Fragment,null,A):e.createElement(e.Fragment,null,"〉"))),e.createElement("div",{className:"date-picker2-calendar",role:"grid"},"date"===fe?e.createElement(u,{weekLabels:le,weekClassName:C,onClickWeekLabel:$,dayOfWeeks:ie,readOnly:F,showToday:G,todayClassName:i,selectedClassName:b,neighborMonthClassName:D,handleChangeDate:function(e){if(!F){var t=new Date(e.year,e.month,e.dayDisplay,0,0,0);ne(t),Q(t),De(e.year,e.month,t)}},formartDayValue:ee}):"month"===fe?e.createElement(c,{labelMonths:I||g,selected:ae.getMonth(),isSameYear:ae.getFullYear()===pe[0],setSelected:function(e){var t=d(pe[0],e),a=t[0],n=t[1];De(a,n,ae),ve("date"),X("date")}}):e.createElement(s,{decadeData:me,selected:ae.getFullYear(),setSelected:function(e){Ne([e,pe[1]]),ve("month"),X("month")}}))):e.createElement(e.Fragment,null)};export{i as DayOfWeeks,s as DecadeView,c as MonthView,b as default,f as fmtYearToNum,v as getDecadesFromYear,h as getMaxDayOfMonth,y as getPreNextOfMonth,d as getRealYearMonth,m as isOverCompareDate,g as labelMonths,p as labelWeekDays};
