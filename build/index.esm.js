import e,{useRef as a,useEffect as t,useState as n}from"react";import r from"joinclass";import{IfCondition as l,IfElseCondition as o}from"react-ifz";var c=function(a){var t=a.value,n=a.className,l=a.disabled,o=a.display,c=a.isSelected,i=a.neighbor,s=a.setSelected;return e.createElement("span",{className:r("picker-cell month-year-cell",n,l&&"disabled-over-range-time",c&&"date-is-selected",i&&"date-neighbor-target"),onClick:function(){return!l&&s(t)},"aria-hidden":!0},e.createElement("span",{className:"date-cell-value"},o||t),e.createElement("div",{className:"date-cell-bullet"}),e.createElement("div",{tabIndex:!l&&c?0:-1,className:"date-cell-box"}))},i=new Date,s=i.getDate(),m=i.getMonth(),d=i.getFullYear(),u=function(e){return null==e},h=function(e,a,t){return s===t&&m===a&&d===e},f=function(e,a){void 0===a&&(a=50),e&&(e.classList.add("fade"),setTimeout((function(){return e.classList.remove("fade")}),a))},y=function(e){var a=e.minYear,t=e.maxYear,n=e.notBeforeTime,r=e.notAfterTime,l=new Date,o=l.getFullYear();if(a||(a=o-100),t||(t=o+100),n){var c=n.getFullYear();a=a<c?c:a}else n=new Date(a,0,1);if(r){var i=r.getFullYear();t=t>i?i:t}else r=new Date(t,11,31);return a>t&&(a=t),!e.minimumDayCanLargeThanToday&&a>o&&(a=o,n=l),{minYear:a,maxYear:t,minMonth:n.getMonth(),maxMonth:r.getMonth(),notBeforeTime:n,notAfterTime:r,beforeYearMonth:M([n.getFullYear(),n.getMonth()]),afterYearMonth:M([r.getFullYear(),r.getMonth()]),beforeAll:C(n.getFullYear(),n.getMonth(),n.getDate()),afterAll:C(r.getFullYear(),r.getMonth(),r.getDate())}},v=function(e,a){return(a||D)[e]||""},N=function(e){return"0".concat(e).slice(-2)},p=function(e,a){return e.reduce((function(e,t,n){return(n%a==0?e.push([t]):e[e.length-1].push(t))&&e}),[])},g=function(e,a){return a>11?(e++,a=0):a<0&&(e--,a=11),[e,a]},k=function(e,a,t,n,r){if(!n&&!r)return!1;var l=C(e,a,t);return r>0&&n>0?!(n<=l&&l<=r):r>0&&l>r||n>0&&l<n},b=function(e){return[31,e%4==0&&e%100!=0||e%400==0?29:28,31,30,31,30,31,31,30,31,30,31]},E=function(e,a){var t=g(e,a),n=t[0],r=t[1];return{year:n,month:r,maxDayOfMonth:b(n)[r],otherMonth:!0}},C=function(e,a,t){return Number(e+N(a)+N(t))},M=function(e){return Number(e[0]+N(e[1]))},Y=function(e,a){return N(e)+N(a)},w=function(e){var a=Number("".concat(e.toString()[2],"0")),t=e.toString().substring(0,2);return[a=Number(0===a?"".concat(t,"00"):"".concat(t).concat(a)),a+9]},D=["January","February","March","April","May","June","July","August","September","October","November","December"],x=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],T=[{name:"Sunday",shortName:"Su",dateClassName:"date-cell-sunday",keyName:"sun",number:0},{name:"Monday",shortName:"Mo",dateClassName:"date-cell-monday",keyName:"mon",number:6},{name:"Tuesday",shortName:"Tu",dateClassName:"date-cell-tuesday",keyName:"tue",number:5},{name:"Wednesday",shortName:"We",dateClassName:"date-cell-wednesday",keyName:"wed",number:4},{name:"Thursday",shortName:"Th",dateClassName:"date-cell-thursday",keyName:"thu",number:3},{name:"Friday",shortName:"Fr",dateClassName:"date-cell-friday",keyName:"fri",number:2},{name:"Saturday",shortName:"Sa",dateClassName:"date-cell-saturday",keyName:"sat",number:1}],S=T.map((function(e){return e.dateClassName})),F={sunday:[0,6,5,4,3,2,1],monday:[6,5,4,3,2,1,0],friday:[2,1,0,6,5,4,3],saturday:[1,0,6,5,4,3,2]},B=function(a){var t=a.weekLabels,n=void 0===t?[]:t,o=a.dayOfWeeks,c=void 0===o?[]:o,i=a.readOnly,s=a.neighborMonthClassName,m=a.showToday,d=a.todayClassName,u=a.selectedClassName,h=a.handleChangeDate,f=a.formatDayValue;return e.createElement(e.Fragment,null,c.map((function(a,t){return e.createElement("div",{key:t,className:"date-row date-line",role:"row"},a.map((function(a,t){var o,c=a.fitMonthDay||i;return e.createElement("span",{key:t,className:r("picker-cell date-cell","date-cell-".concat(x[a.month]),null===(o=n[t])||void 0===o?void 0:o.dateClassName,"date-cell-".concat(Y(a.month+1,a.dayDisplay)),"date-cell-".concat(C(a.year,a.month+1,a.dayDisplay)),a.isBookmark&&"date-is-bookmark",a.bookmarkClassName,a.otherMonth&&"date-neighbor-target",a.otherMonth&&s,a.isToday&&m&&"date-is-today",a.isToday&&d,!c&&a.isSelected&&"date-is-selected",!c&&a.isSelected&&u,c&&"read-only",!c&&a.isOverRange&&"disabled-over-range-time"),onClick:function(e){return!c&&!a.isOverRange&&h(a)},"aria-hidden":!0},e.createElement(l,{condition:!a.fitMonthDay},e.createElement("span",{className:"date-cell-value"},f?f(a.dayDisplay):a.dayDisplay)),e.createElement("div",{className:"date-cell-bullet"}),e.createElement("div",{tabIndex:!c&&a.isSelected?0:-1,className:"date-cell-box"}))})))})))},O=function(a){for(var t=a.decadeData,n=a.selected,r=a.minYear,l=a.maxYear,o=a.setSelected,i=void 0===o?function(){}:o,s=t[0],m=t[1],d=[],u=s-1;u<=m+1;u++)d.push(u);var h=p(d,3);return e.createElement(e.Fragment,null,h.map((function(a,t){return e.createElement("div",{key:t,className:"date-row",role:"row"},a.map((function(a,t){return e.createElement(c,{key:t,className:"year-cell-".concat(a),disabled:r>a||l<a,neighbor:a<s||a>m,isSelected:a===n,value:a,setSelected:i})})))})))},L=function(a){var t=a.labelMonths,n=a.selected,l=a.isSameYear,o=a.year,i=a.minYearMonth,s=a.maxYearMonth,m=a.setSelected,d=void 0===m?function(){}:m,u=p(t||D,3);return e.createElement(e.Fragment,null,u.map((function(a,t){return e.createElement("div",{key:t,className:"date-row",role:"row"},a.map((function(a,m){var u=3*t+m,h=M(g(o,u));return e.createElement(c,{key:m,className:r("month-year-cell-".concat(h),"month-cell-".concat(x[u])),disabled:i>h||s<h,isSelected:u===n&&l,display:a,value:u,setSelected:d})})))})))},A=function(a){var t=a.weekLabels,n=a.weekClassName,l=a.dayOfWeeks,o=void 0===l?[]:l,c=a.readOnly,i=a.neighborMonthClassName,s=a.showToday,m=a.todayClassName,d=a.selectedClassName,u=a.onClickWeekLabel,h=void 0===u?function(){}:u,f=a.handleChangeDate,y=a.formatDayValue;return e.createElement(e.Fragment,null,e.createElement("div",{className:"date-row date-label",role:"row"},t.map((function(a,t){return e.createElement("span",{key:t,className:r("week-label date-cell",a.dateClassName,n),onClick:function(){return h(a)},"aria-hidden":!0},e.createElement("span",null,a.shortName||a.name),e.createElement("div",{className:"week-cell-box"}))}))),e.createElement(B,{weekLabels:t,dayOfWeeks:o,readOnly:c,neighborMonthClassName:i,showToday:s,todayClassName:m,selectedClassName:d,formatDayValue:y,handleChangeDate:f}))},W=function(a){var t=a.children,n=a.className,l=a.disabled,o=a.show,c=a.index,i=a.handleNextBack;return o?e.createElement("span",{className:r("date-picker2-nav-button",n,l&&"button-disabled"),onClick:function(){return!l&&i(c)}},t||e.createElement("span",{className:"date-picker2-arrow-inner"})):null},V=function(a){var t=a.showXClose,n=void 0===t||t,r=a.xCloseIcon,o=a.showFooter,c=a.selectedValue,i=a.resetSelectionValue;return e.createElement(l,{condition:o},e.createElement("div",{className:"date-picker2-footer"},e.createElement("div",{className:"date-picker2-footer-content"},e.createElement("div",{className:"date-picker2-calendar-selected"},c),e.createElement("div",{className:"date-picker2-calendar-close"},e.createElement(l,{condition:Boolean(r)},e.createElement("div",{className:"date-picker2-calendar-close-icon date-picker2-calendar-your-icon",onClick:i},r)),e.createElement(l,{condition:n&&Boolean(!r)},e.createElement("div",{className:"date-picker2-calendar-close-icon date-picker2-calendar-close-x-icon",onClick:i}))))))},j=function(){return j=Object.assign||function(e){for(var a,t=1,n=arguments.length;t<n;t++)for(var r in a=arguments[t])Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);return e},j.apply(this,arguments)};function I(e,a,t){if(t||2===arguments.length)for(var n,r=0,l=a.length;r<l;r++)!n&&r in a||(n||(n=Array.prototype.slice.call(a,0,r)),n[r]=a[r]);return e.concat(n||Array.prototype.slice.call(a))}"function"==typeof SuppressedError&&SuppressedError;var R,J=function(n){var l=n.currentDate,o=n.minYear,c=n.maxYear,i=n.minMonth,s=n.maxMonth,m=n.valueMonth,d=n.valueYear,h=n.className,y=n.i18nLabelMonth,v=n.minimumDayCanLargeThanToday,N=n.handleChange,p=a(null),g=a(null);if(t((function(){g.current&&f(g.current)}),[m]),t((function(){p.current&&f(p.current)}),[d]),u(m)||u(d))return null;var k=d===c?(y||D).slice(0,s+1):d===o?(y||D).slice(i):y||D,b=function(){var e,a=l.getFullYear();return o>c&&(o=(e=[c,o])[0],c=e[1]),(v&&o<a||a<o)&&(o=a),new Array(c-o+1).fill(0)}();return e.createElement("span",{className:r("date-picker2-select-month-year date-picker2-title-month-year",h)},e.createElement("span",{ref:g,className:"date-picker2-select-month"},e.createElement("select",{className:"date-picker2-select-month-control",value:m,onChange:function(e){f(e.target,100),N(d,Number(e.target.value))},"aria-hidden":!0},k.map((function(a,t){return e.createElement("option",{key:t,value:t},a)})))),e.createElement("span",{className:"date-picker2-select-split"}),e.createElement("span",{ref:p,className:"date-picker2-select-year"},e.createElement("select",{className:"date-picker2-select-year-control",value:d,onChange:function(e){f(e.target,100),N(Number(e.target.value),m)},"aria-hidden":!0},b.map((function(a,t){var n=c-t;return e.createElement("option",{key:n,value:n},n)})))))},X=((R={8:1,7:0})[-1]=6,R),z={monday:{numberWeek:1,plus:-1},sunday:{numberWeek:0,plus:0},saturday:{numberWeek:-1,plus:1},friday:{numberWeek:-2,plus:2}},P=function(c){var i=c.className,s=c.todayClassName,m=c.selectedClassName,d=c.neighborMonthClassName,u=c.labelMonthYearClassName,h=c.weekClassName,N=c.width,p=c.height,k=c.readOnly,Y=c.show,D=void 0===Y||Y,B=c.showAnchor,R=c.labelNext,P=c.labelBack,q=c.weekStart,H=void 0===q?"sunday":q,K=c.fitMonthDay,Q=c.notBeforeTime,U=c.notAfterTime,Z=c.value,$=c.bookmarkDates,_=c.showToday,ee=void 0===_||_,ae=c.i18nLabelWeek,te=c.i18nLabelMonth,ne=c.minYear,re=c.maxYear,le=c.minimumDayCanLargeThanToday,oe=c.showMonthYearSelection,ce=c.showNextBack,ie=void 0===ce||ce,se=c.rightNextBack,me=c.showFooter,de=c.showXClose,ue=void 0===de||de,he=c.xCloseIcon,fe=c.refsResetCalendar,ye=c.onSelectedValue,ve=void 0===ye?function(){}:ye,Ne=c.onChangeView,pe=void 0===Ne?function(){}:Ne,ge=c.onClickWeekLabel,ke=void 0===ge?function(){}:ge,be=c.formatTittleYearMonth,Ee=c.formatDayValue,Ce=c.formatSelectedDate,Me=a(null),Ye=a(!0),we=a({}),De=n(Z||new Date),xe=De[0],Te=De[1],Se=n([]),Fe=Se[0],Be=Se[1],Oe=n([]),Le=Oe[0],Ae=Oe[1],We=n([]),Ve=We[0],je=We[1],Ie=n("date"),Re=Ie[0],Je=Ie[1],Xe=n([]),ze=Xe[0],Pe=Xe[1],qe="date"===Re,Ge="month"===Re,He="year"===Re;t((function(){we.current=y({maxYear:re,minYear:ne,notAfterTime:U,notBeforeTime:Q,minimumDayCanLargeThanToday:le});var e=Z||new Date;Z?le||e<we.current.notBeforeTime&&(Ye.current=!1,e=we.current.notBeforeTime):le&&(Ye.current=!1,e=new Date(we.current.minYear,we.current.minMonth,1)),ea(e.getFullYear(),e.getMonth(),e),fe&&(fe.current=aa)}),[Z,ee,Q,U,te,k,K,le,oe,H,ae,$]),t((function(){var e=Array.isArray(ae)&&7===ae.length?ae:T,a=new Map;e.forEach((function(e,t){var n="object"==typeof e?j({},e):{shortName:e};a.set(T[t].number,j(j({},n),{dateClassName:S[t]}))}));var t=(F[H]||F.sunday).map((function(e){return j({},a.get(e))}));Be(t)}),[H,ae]),t((function(){(D||oe)&&aa()}),[D,oe,H,$]);var Ke,Qe,Ue=function(){var e=ze[0],a=ze[1];if(He)return{disabledBack:Ve[0]<we.current.minYear,disabledNext:Ve[1]>we.current.maxYear};if(qe){var t=b(e)[a];return{disabledBack:we.current.beforeAll>=C(e,a,1),disabledNext:we.current.afterAll<=C(e,a,t)}}var n=g(e,0),r=g(e,11);return{disabledBack:we.current.beforeYearMonth>=M(n),disabledNext:we.current.afterYearMonth<=M(r)}}(),Ze=Ue.disabledBack,$e=Ue.disabledNext,_e=function(e){if(!(Ze&&-1===e||$e&&1===e)){f(Me.current);var a=ze[0],t=ze[1];if(He){var n=a+10*e;return je(w(n)),void Pe([n,t])}var r=qe||oe?g(a,t+e):g(a+e,t),l=r[0],o=r[1];ea(l,o)}},ea=function(e,a,t){void 0===t&&(t=xe),function(e,a,t,n,r,l,o,c,i,s,m){void 0===s&&(s=[]);var d=new Date(e,a,1).getDay(),u=b(e)[a],h=E(e,a-1),f=E(e,a+1),y=n?C(n.getFullYear(),n.getMonth(),n.getDate()):0,v=r?C(r.getFullYear(),r.getMonth(),r.getDate()):0;if("sunday"!==l&&z[l]){d+=z[l].plus,void 0!==X[d]&&(d=X[d])}var N=[],p=[],g=1;if(0!==d||0===d&&28===u)for(var k=h.maxDayOfMonth-d+1;k<=h.maxDayOfMonth;k++){var M=G(h,t,s,y,v,h.year,h.month,k,o,m);p.push(M)}var Y=p.length;g=p.length,7===p.length&&(N.push(I([],p,!0)),p=[],g=1);for(k=1;k<=u;k++){M=G({year:e,month:a,dayDisplay:k},t,s,y,v,e,a,k,o,m);p.push(M),++g>=7&&(N.push(I([],p,!0)),p=[],g=0)}var w=42-Y-u;for(k=1;k<=w;k++){M=G(f,t,s,y,v,f.year,f.month,k,o,m);p.push(M),++g>=7&&(N.push(I([],p,!0)),p=[],g=0)}p.length>0&&N.push(I([],p,!0)),c(N),i([e,a])}(e,a,t,we.current.notBeforeTime,we.current.notAfterTime,H,Boolean(K),Ae,Pe,$,Ye.current)},aa=function(){Je("date"),pe("date"),ea(xe.getFullYear(),xe.getMonth())};return D?e.createElement("div",{style:{width:N,height:p},className:r("date-picker2",i)},e.createElement("div",{className:"date-picker2-header"},e.createElement(l,{condition:!se},e.createElement(W,{index:-1,show:ie,className:"button-left",disabled:Ze,handleNextBack:_e},P)),e.createElement(l,{condition:B},e.createElement("span",{className:"date-picker2-anchor left-label"})),e.createElement(o,{condition:oe,elseChildren:e.createElement("span",{ref:Me,className:r("date-picker2-title-month-year",qe&&"date-picker2-title-month",Ge&&"date-picker2-title-year",He&&"date-picker2-title-decade",u)},e.createElement("span",{className:"date-picker2-label-month-year",onClick:function(){var e="date";Ge&&(je(w(ze[0])),e="year"),qe&&(e="month"),Je(e),pe(e),f(Me.current)},"aria-hidden":!0},(Ke=ze[0],Qe=ze[1],be?Ge?be(Ke,-1):He?be(-1,-1,Ve):be(Ke,Qe+1):Ge?Ke||"":He?"".concat(Ve[0]," - ").concat(Ve[1]):"".concat(v(Qe,te)," ").concat(Ke||"").trim())))},e.createElement(J,{className:u,currentDate:xe,maxYear:we.current.maxYear,minYear:we.current.minYear,minMonth:we.current.minMonth,maxMonth:we.current.maxMonth,valueYear:ze[0],valueMonth:ze[1],i18nLabelMonth:te,minimumDayCanLargeThanToday:le,handleChange:ea})),e.createElement(l,{condition:B},e.createElement("span",{className:"date-picker2-anchor right-label"})),e.createElement(l,{condition:se},e.createElement(W,{index:-1,show:ie,className:"button-left",disabled:Ze,handleNextBack:_e},P)),e.createElement(W,{index:1,show:ie,className:"button-right",disabled:$e,handleNextBack:_e},R)),e.createElement("div",{className:"date-picker2-content"},e.createElement("div",{className:r("date-picker2-calendar","date-picker2-calendar-month-".concat(x[ze[1]])),role:"grid"},e.createElement(l,{condition:qe},e.createElement(A,{weekLabels:Fe,weekClassName:h,dayOfWeeks:Le,readOnly:k,showToday:ee,todayClassName:s,selectedClassName:m,neighborMonthClassName:d,onClickWeekLabel:ke,handleChangeDate:function(e){if(!k){Ye.current=!0;var a=new Date(e.year,e.month,e.dayDisplay);Te(a),ve(a),ea(e.year,e.month,a)}},formatDayValue:Ee})),e.createElement(l,{condition:Ge},e.createElement(L,{year:ze[0],labelMonths:te,minYearMonth:we.current.beforeYearMonth,maxYearMonth:we.current.afterYearMonth,selected:xe.getMonth(),isSameYear:xe.getFullYear()===ze[0],setSelected:function(e){var a=g(ze[0],e),t=a[0],n=a[1];ea(t,n),Je("date"),pe("date")}})),e.createElement(l,{condition:He},e.createElement(O,{decadeData:Ve,selected:xe.getFullYear(),minYear:we.current.minYear,maxYear:we.current.maxYear,setSelected:function(e){Pe([e,ze[1]]),Je("month"),pe("month")}})))),e.createElement(V,{showXClose:ue,xCloseIcon:he,showFooter:me,selectedValue:function(){var e=Z||xe;if(Ce)return Ce(e);var a=v(e.getMonth(),te),t="".concat(e.getDate()).slice(-2);return"".concat(a," ").concat(t,", ").concat(e.getFullYear())}(),resetSelectionValue:aa})):e.createElement(e.Fragment,null)},q=function(e,a,t,n){return t===n.getDate()&&a===n.getMonth()&&e===n.getFullYear()},G=function(e,a,t,n,r,l,o,c,i,s){void 0===t&&(t=[]),void 0===c&&(c=0),void 0===s&&(s=!1);var m=function(e,a,t,n){return void 0===n&&(n=[]),n.find((function(n){var r=n.date;return r.getFullYear()===e&&r.getMonth()===a&&r.getDate()===t}))||{}}(l,o,c,t);return j(j({},e),{dayDisplay:c,isToday:h(l,o,c),isSelected:q(l,o,c,a)&&s,isOverRange:k(l,o,c,n,r),fitMonthDay:i,isBookmark:Boolean(m.className),bookmarkClassName:m.className})};export{c as CalendarCell,B as CalendarDayOfWeeks,O as CalendarDecade,V as CalendarFooter,L as CalendarMonth,W as CalendarNav,A as CalendarWeek,f as animateLabelChange,S as datesClassName,P as default,Y as fmtMonthDay,w as getDecadesFromYear,b as getMaxDayOfMonth,y as getMiMaxYear,v as getMonthName,E as getPreNextOfMonth,g as getRealYearMonth,u as isNil,k as isOverCompareDate,h as isToday,x as keyMonths,D as labelMonths,T as labelWeekDays,N as padZero,C as parseYearMonthDateToNumber,M as parseYearMonthToNumber,F as startWeekDays,p as toMatrix};
