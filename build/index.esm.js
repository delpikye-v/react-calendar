import e,{useRef as a,useEffect as t,useState as n}from"react";import r from"joinclass";var l=function(a){var t=a.value,n=a.className,l=a.disabled,o=a.display,c=a.isSelected,i=a.neighbor,s=a.setSelected;return e.createElement("span",{className:r("picker-cell month-year-cell",n,l&&"disabled-over-range-time",c&&"date-is-selected",i&&"date-neighbor-target"),onClick:function(){return!l&&s(t)},"aria-hidden":!0},e.createElement("span",{className:"date-cell-value"},o||t),e.createElement("div",{className:"date-cell-bullet"}),e.createElement("div",{tabIndex:!l&&c?0:-1,className:"date-cell-box"}))},o=function(e){var a=e.children,t=e.ifCondition,n=e.elseChildren;return t?a:void 0===n?null:n},c=function(e){return null==e},i=function(e,a){void 0===a&&(a=50),e&&(e.classList.add("fade"),setTimeout((function(){return e.classList.remove("fade")}),a))},s=function(e){var a=e.minYear,t=e.maxYear,n=e.notBeforeTime,r=e.notAfterTime,l=new Date,o=l.getFullYear();if(a||(a=o-100),t||(t=o+100),n){var c=n.getFullYear();a=a<c?c:a}else n=new Date(a,0,1);if(r){var i=r.getFullYear();t=t>i?i:t}else r=new Date(t,11,31);return a>t&&(a=t),!e.minimumDayCanLargeThanToday&&a>o&&(a=o,n=l),{minYear:a,maxYear:t,minMonth:n.getMonth(),maxMonth:r.getMonth(),notBeforeTime:n,notAfterTime:r,beforeYearMonth:k([n.getFullYear(),n.getMonth()]),afterYearMonth:k([r.getFullYear(),r.getMonth()]),beforeAll:N(n.getFullYear(),n.getMonth(),n.getDate()),afterAll:N(r.getFullYear(),r.getMonth(),r.getDate())}},m=function(e,a){return(a||b)[e]||""},d=function(e){return"0".concat(e).slice(-2)},u=function(e,a){return e.reduce((function(e,t,n){return(n%a==0?e.push([t]):e[e.length-1].push(t))&&e}),[])},h=function(e,a){return a>11?(e++,a=0):a<0&&(e--,a=11),[e,a]},f=function(e,a,t,n,r){if(!n&&!r)return!1;var l=N(e,a,t);return r>0&&n>0?!(n<=l&&l<=r):r>0&&l>r||n>0&&l<n},y=function(e){return[31,e%4==0&&e%100!=0||e%400==0?29:28,31,30,31,30,31,31,30,31,30,31]},v=function(e,a){var t=h(e,a),n=t[0],r=t[1];return{year:n,month:r,maxDayOfMonth:y(n)[r],otherMonth:!0}},N=function(e,a,t){var n=e+d(a)+d(t);return Number(n)},k=function(e){var a=e[0]+d(e[1]);return Number(a)},p=function(e,a){return d(e)+d(a)},g=function(e){var a=Number("".concat(e.toString()[2],"0")),t=e.toString().substring(0,2);return[a=Number(0===a?"".concat(t,"00"):"".concat(t).concat(a)),a+9]},b=["January","February","March","April","May","June","July","August","September","October","November","December"],C=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],E=[{name:"Sunday",shortName:"Su",dateClassName:"date-cell-sunday",keyName:"sun"},{name:"Monday",shortName:"Mo",dateClassName:"date-cell-monday",keyName:"mon"},{name:"Tuesday",shortName:"Tu",dateClassName:"date-cell-tuesday",keyName:"tue"},{name:"Wednesday",shortName:"We",dateClassName:"date-cell-wednesday",keyName:"wed"},{name:"Thursday",shortName:"Th",dateClassName:"date-cell-thursday",keyName:"thu"},{name:"Friday",shortName:"Fr",dateClassName:"date-cell-friday",keyName:"fri"},{name:"Saturday",shortName:"Sa",dateClassName:"date-cell-saturday",keyName:"sat"}],M=E.map((function(e){return e.dateClassName})),Y=function(a){var t=a.weekLabels,n=void 0===t?[]:t,l=a.dayOfWeeks,c=void 0===l?[]:l,i=a.readOnly,s=a.neighborMonthClassName,m=a.showToday,d=a.todayClassName,u=a.selectedClassName,h=a.handleChangeDate,f=a.formartDayValue;return e.createElement(e.Fragment,null,c.map((function(a,t){return e.createElement("div",{key:t,className:"date-row date-line",role:"row"},a.map((function(a,t){var l,c=a.fitMonthDay||i;return e.createElement("span",{key:t,className:r("picker-cell date-cell","date-cell-".concat(C[a.month]),null===(l=n[t])||void 0===l?void 0:l.dateClassName,"date-cell-".concat(p(a.month+1,a.dayDisplay)),"date-cell-".concat(N(a.year,a.month+1,a.dayDisplay)),a.isBookmark&&"date-is-bookmark",a.bookmarkClassName,a.otherMonth&&"date-neighbor-target",a.otherMonth&&s,a.isToday&&m&&"date-is-today",a.isToday&&d,!c&&a.isSelected&&"date-is-selected",!c&&a.isSelected&&u,c&&"read-only",!c&&a.isOverRange&&"disabled-over-range-time"),onClick:function(e){return!c&&!a.isOverRange&&h(a)},"aria-hidden":!0},e.createElement(o,{ifCondition:!a.fitMonthDay},e.createElement("span",{className:"date-cell-value"},f?f(a.dayDisplay):a.dayDisplay)),e.createElement("div",{className:"date-cell-bullet"}),e.createElement("div",{tabIndex:!c&&a.isSelected?0:-1,className:"date-cell-box"}))})))})))},D=function(a){for(var t=a.decadeData,n=a.selected,r=a.minYear,o=a.maxYear,c=a.setSelected,i=void 0===c?function(){}:c,s=t[0],m=t[1],d=[],h=s-1;h<=m+1;h++)d.push(h);var f=u(d,3);return e.createElement(e.Fragment,null,f.map((function(a,t){return e.createElement("div",{key:t,className:"date-row",role:"row"},a.map((function(a,t){return e.createElement(l,{key:t,className:"year-cell-".concat(a),disabled:r>a||o<a,neighbor:a<s||a>m,isSelected:a===n,value:a,setSelected:i})})))})))},w=function(a){var t=a.labelMonths,n=a.selected,o=a.isSameYear,c=a.year,i=a.minYearMonth,s=a.maxYearMonth,m=a.setSelected,d=void 0===m?function(){}:m,f=u(t||b,3);return e.createElement(e.Fragment,null,f.map((function(a,t){return e.createElement("div",{key:t,className:"date-row",role:"row"},a.map((function(a,m){var u=3*t+m,f=k(h(c,u));return e.createElement(l,{key:m,className:r("month-year-cell-".concat(f),"month-cell-".concat(C[u])),disabled:i>f||s<f,isSelected:u===n&&o,display:a,value:u,setSelected:d})})))})))},x=function(a){var t=a.weekLabels,n=a.weekClassName,l=a.dayOfWeeks,o=void 0===l?[]:l,c=a.readOnly,i=a.neighborMonthClassName,s=a.showToday,m=a.todayClassName,d=a.selectedClassName,u=a.onClickWeekLabel,h=void 0===u?function(){}:u,f=a.handleChangeDate,y=a.formartDayValue;return e.createElement(e.Fragment,null,e.createElement("div",{className:"date-row date-label",role:"row"},t.map((function(a,t){return e.createElement("span",{key:t,className:r("week-label date-cell",a.dateClassName,n),onClick:function(){return h(a)},"aria-hidden":!0},e.createElement("span",null,a.shortName||a.name),e.createElement("div",{className:"week-cell-box"}))}))),e.createElement(Y,{weekLabels:t,dayOfWeeks:o,readOnly:c,neighborMonthClassName:i,showToday:s,todayClassName:m,selectedClassName:d,formartDayValue:y,handleChangeDate:f}))},T=function(a){var t=a.children,n=a.className,l=a.disabled,o=a.show,c=a.index,i=a.handleNextBack;return o?e.createElement("span",{className:r("date-picker2-nav-button",n,l&&"button-disabled"),onClick:function(){return!l&&i(c)}},t||e.createElement("span",{className:"date-picker2-arrow-inner"})):null},S=function(a){var t=a.showXClose,n=void 0===t||t,r=a.xCloseIcon,l=a.showFooter,c=a.selectedValue,i=a.resetSelectionValue;return e.createElement(o,{ifCondition:l},e.createElement("div",{className:"date-picker2-footer"},e.createElement("div",{className:"date-picker2-footer-content"},e.createElement("div",{className:"date-picker2-calendar-selected"},c),e.createElement("div",{className:"date-picker2-calendar-close"},e.createElement(o,{ifCondition:n&&Boolean(!r)},e.createElement("div",{className:"date-picker2-calendar-close-icon date-picker2-calendar-close-x-icon",onClick:i})),e.createElement(o,{ifCondition:Boolean(r)},e.createElement("div",{className:"date-picker2-calendar-close-icon date-picker2-calendar-your-icon",onClick:i},r))))))},F=function(){return F=Object.assign||function(e){for(var a,t=1,n=arguments.length;t<n;t++)for(var r in a=arguments[t])Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);return e},F.apply(this,arguments)};function B(e,a,t){if(t||2===arguments.length)for(var n,r=0,l=a.length;r<l;r++)!n&&r in a||(n||(n=Array.prototype.slice.call(a,0,r)),n[r]=a[r]);return e.concat(n||Array.prototype.slice.call(a))}"function"==typeof SuppressedError&&SuppressedError;var O,L=function(n){var l=n.currentDate,o=n.minYear,s=n.maxYear,m=n.minMonth,d=n.maxMonth,u=n.valueMonth,h=n.valueYear,f=n.className,y=n.i18nLabelMonth,v=n.minimumDayCanLargeThanToday,N=n.handleChange,k=a(null),p=a(null);if(t((function(){p.current&&i(p.current)}),[u]),t((function(){k.current&&i(k.current)}),[h]),c(u)||c(h))return null;var g=h===s?(y||b).slice(0,d+1):h===o?(y||b).slice(m):y||b,C=function(){var e,a=l.getFullYear();return o>s&&(o=(e=[s,o])[0],s=e[1]),(v&&o<a||a<o)&&(o=a),new Array(s-o+1).fill(0)}();return e.createElement("span",{className:r("date-picker2-select-month-year date-picker2-title-month-year",f)},e.createElement("span",{ref:p,className:"date-picker2-select-month"},e.createElement("select",{className:"date-picker2-select-month-control",value:u,onChange:function(e){i(e.target,100),N(h,Number(e.target.value))},"aria-hidden":!0},g.map((function(a,t){return e.createElement("option",{key:t,value:t},a)})))),e.createElement("span",{className:"date-picker2-select-split"}),e.createElement("span",{ref:k,className:"date-picker2-select-year"},e.createElement("select",{className:"date-picker2-select-year-control",value:h,onChange:function(e){i(e.target,100),N(Number(e.target.value),u)},"aria-hidden":!0},C.map((function(a,t){var n=s-t;return e.createElement("option",{key:n,value:n},n)})))))},A=((O={8:1,7:0})[-1]=6,O),W={monday:{numberWeek:1,plus:-1},sunday:{numberWeek:0,plus:0},saturday:{numberWeek:-1,plus:1},friday:{numberWeek:-2,plus:2}},V=function(l){var c=l.className,d=l.todayClassName,u=l.selectedClassName,p=l.neighborMonthClassName,b=l.labelMonthYearClassName,Y=l.weekClassName,O=l.width,V=void 0===O?"350px":O,R=l.height,J=void 0===R?"auto":R,X=l.readOnly,P=l.show,q=void 0===P||P,z=l.showAnchor,G=l.labelNext,H=l.labelBack,K=l.weekStart,Q=void 0===K?"sunday":K,U=l.fitMonthDay,Z=l.notBeforeTime,$=l.notAfterTime,_=l.value,ee=l.bookmarkDates,ae=l.showToday,te=void 0===ae||ae,ne=l.i18nLabelWeek,re=l.i18nLabelMonth,le=l.minYear,oe=l.maxYear,ce=l.minimumDayCanLargeThanToday,ie=l.showMonthYearSelection,se=l.showNextBack,me=void 0===se||se,de=l.rightNextBack,ue=l.showFooter,he=l.showXClose,fe=void 0===he||he,ye=l.xCloseIcon,ve=l.onSelectedValue,Ne=void 0===ve?function(){}:ve,ke=l.onChangeView,pe=void 0===ke?function(){}:ke,ge=l.onClickWeekLabel,be=void 0===ge?function(){}:ge,Ce=l.formatTittleYearMonth,Ee=l.formartDayValue,Me=l.formatSelectedDate,Ye=a(null),De=a(!0),we=a({}),xe=n(_||new Date),Te=xe[0],Se=xe[1],Fe=n([]),Be=Fe[0],Oe=Fe[1],Le=n([]),Ae=Le[0],We=Le[1],Ve=n([]),je=Ve[0],Ie=Ve[1],Re=n("date"),Je=Re[0],Xe=Re[1],Pe=n([]),qe=Pe[0],ze=Pe[1],Ge="date"===Je,He="month"===Je,Ke="year"===Je;t((function(){we.current=s({maxYear:oe,minYear:le,notAfterTime:$,notBeforeTime:Z,minimumDayCanLargeThanToday:ce});var e=_||new Date;_?ce||e<we.current.notBeforeTime&&(De.current=!1,e=we.current.notBeforeTime):ce&&(De.current=!1,e=new Date(we.current.minYear,we.current.minMonth,1)),aa(e.getFullYear(),e.getMonth(),e)}),[_,te,Z,$,re,X,U,ce,ie,Q,ne,ee]),t((function(){var e,a=(Array.isArray(ne)&&7===ne.length?ne:E).map((function(e,a){return F(F({},e),{dateClassName:M[a]})})),t=null===(e=W[Q])||void 0===e?void 0:e.numberWeek,n=void 0===t?0:t;Oe(B(B([],a.slice(n),!0),a.slice(0,n),!0))}),[Q,ne]),t((function(){(q||ie)&&ta()}),[q,ie,Q,ee]);var Qe,Ue,Ze=function(){var e=qe[0],a=qe[1];if(Ke)return{disabledBack:je[0]<we.current.minYear,disabledNext:je[1]>we.current.maxYear};if(Ge){var t=y(e)[a];return{disabledBack:we.current.beforeAll>=N(e,a,1),disabledNext:we.current.afterAll<=N(e,a,t)}}var n=h(e,0),r=h(e,11);return{disabledBack:we.current.beforeYearMonth>=k(n),disabledNext:we.current.afterYearMonth<=k(r)}}(),$e=Ze.disabledBack,_e=Ze.disabledNext,ea=function(e){if(!($e&&-1===e||_e&&1===e)){i(Ye.current);var a=qe[0],t=qe[1];if(Ke){var n=a+10*e;return Ie(g(n)),void ze([n,t])}var r=Ge||ie?h(a,t+e):h(a+e,t),l=r[0],o=r[1];aa(l,o)}},aa=function(e,a,t){void 0===t&&(t=Te),function(e,a,t,n,r,l,o,c,i,s,m){void 0===s&&(s=[]);var d=new Date,u=d.getDate(),h=d.getMonth(),k=d.getFullYear(),p=new Date(e,a,1).getDay(),g=y(e)[a],b=v(e,a-1),C=v(e,a+1),E=n?N(n.getFullYear(),n.getMonth(),n.getDate()):0,M=r?N(r.getFullYear(),r.getMonth(),r.getDate()):0;if("sunday"!==l&&W[l]){p+=W[l].plus,void 0!==A[p]&&(p=A[p])}var Y=[],D=[],w=1,x=function(e,a,t){return u===t&&h===a&&k===e};if(0!==p||0===p&&28===g)for(var T=b.maxDayOfMonth-p+1;T<=b.maxDayOfMonth;T++){var S=I(b.year,b.month,T,s);D.push(F(F({},b),{dayDisplay:T,isToday:x(b.year,b.month,T),isSelected:j(b,T,t),isOverRange:f(b.year,b.month,T,E,M),fitMonthDay:o,isBookmark:Boolean(S.className),bookmarkClassName:S.className}))}var O=D.length;w=D.length,7===D.length&&(Y.push(B([],D,!0)),D=[],w=1);for(T=1;T<=g;T++){S=I(e,a,T,s);D.push({year:e,month:a,maxDayOfMonth:g,dayDisplay:T,isToday:x(e,a,T),isSelected:j({year:e,month:a},T,t)&&m,isOverRange:f(e,a,T,E,M),isBookmark:Boolean(S.className),bookmarkClassName:S.className}),++w>=7&&(Y.push(B([],D,!0)),D=[],w=0)}var L=42-O-g;for(T=1;T<=L;T++){S=I(C.year,C.month,T,s);D.push(F(F({},C),{dayDisplay:T,isToday:x(C.year,C.month,T),isSelected:j(C,T,t),isOverRange:f(C.year,C.month,T,E,M),fitMonthDay:o,isBookmark:Boolean(S.className),bookmarkClassName:S.className})),++w>=7&&(Y.push(B([],D,!0)),D=[],w=0)}D.length>0&&Y.push(B([],D,!0)),c(Y),i([e,a])}(e,a,t,we.current.notBeforeTime,we.current.notAfterTime,Q,Boolean(U),We,ze,ee,De.current)},ta=function(){Xe("date"),pe("date"),aa(Te.getFullYear(),Te.getMonth())};return q?e.createElement("div",{style:{width:V,height:U?"auto":J},className:r("date-picker2",c)},e.createElement("div",{className:"date-picker2-header"},e.createElement(o,{ifCondition:!de},e.createElement(T,{show:me,className:"button-left",disabled:$e,index:-1,handleNextBack:ea},H)),e.createElement(o,{ifCondition:z},e.createElement("span",{className:"date-picker2-anchor left-label"})),e.createElement(o,{ifCondition:ie,elseChildren:e.createElement("span",{ref:Ye,className:r("date-picker2-title-month-year",Ge&&"date-picker2-title-month",He&&"date-picker2-title-year",Ke&&"date-picker2-title-decade",b)},e.createElement("span",{className:"date-picker2-label-month-year",onClick:function(){var e="date";He&&(Ie(g(qe[0])),e="year"),Ge&&(e="month"),Xe(e),pe(e),i(Ye.current)},"aria-hidden":!0},(Qe=qe[0],Ue=qe[1],Ce?He?Ce(Qe,-1):Ke?Ce(-1,-1,je):Ce(Qe,Ue+1):He?Qe||"":Ke?"".concat(je[0]," - ").concat(je[1]):"".concat(m(Ue,re)," ").concat(Qe||"").trim())))},e.createElement(L,{className:b,currentDate:Te,maxYear:we.current.maxYear,minYear:we.current.minYear,minMonth:we.current.minMonth,maxMonth:we.current.maxMonth,valueYear:qe[0],valueMonth:qe[1],i18nLabelMonth:re,minimumDayCanLargeThanToday:ce,handleChange:aa})),e.createElement(o,{ifCondition:z},e.createElement("span",{className:"date-picker2-anchor right-label"})),e.createElement(o,{ifCondition:de},e.createElement(T,{show:me,className:"button-left",disabled:$e,index:-1,handleNextBack:ea},H)),e.createElement(T,{show:me,className:"button-right",disabled:_e,index:1,handleNextBack:ea},G)),e.createElement("div",{className:"date-picker2-content"},e.createElement("div",{className:r("date-picker2-calendar","date-picker2-calendar-month-".concat(C[qe[1]])),role:"grid"},e.createElement(o,{ifCondition:Ge},e.createElement(x,{weekLabels:Be,weekClassName:Y,dayOfWeeks:Ae,readOnly:X,showToday:te,todayClassName:d,selectedClassName:u,neighborMonthClassName:p,onClickWeekLabel:be,handleChangeDate:function(e){if(!X){De.current=!0;var a=new Date(e.year,e.month,e.dayDisplay,0,0,0);Se(a),Ne(a),aa(e.year,e.month,a)}},formartDayValue:Ee})),e.createElement(o,{ifCondition:He},e.createElement(w,{year:qe[0],labelMonths:re,minYearMonth:we.current.beforeYearMonth,maxYearMonth:we.current.afterYearMonth,selected:Te.getMonth(),isSameYear:Te.getFullYear()===qe[0],setSelected:function(e){var a=h(qe[0],e),t=a[0],n=a[1];aa(t,n),Xe("date"),pe("date")}})),e.createElement(o,{ifCondition:Ke},e.createElement(D,{decadeData:je,selected:Te.getFullYear(),minYear:we.current.minYear,maxYear:we.current.maxYear,setSelected:function(e){ze([e,qe[1]]),Xe("month"),pe("month")}})))),e.createElement(S,{showXClose:fe,xCloseIcon:ye,showFooter:ue,selectedValue:function(){var e=_||Te;if(Me)return Me(e);var a=m(e.getMonth(),re),t="".concat(e.getDate()).slice(-2);return"".concat(a,", ").concat(t," ").concat(e.getFullYear())}(),resetSelectionValue:ta})):e.createElement(e.Fragment,null)},j=function(e,a,t){return a===t.getDate()&&e.month===t.getMonth()&&e.year===t.getFullYear()},I=function(e,a,t,n){return void 0===n&&(n=[]),n.find((function(n){var r=n.date;return r.getFullYear()===e&&r.getMonth()===a&&r.getDate()===t}))||{}};export{l as CalendarCell,Y as CalendarDayOfWeeks,D as CalendarDecade,S as CalendarFooter,w as CalendarMonth,T as CalendarNav,x as CalendarWeek,o as RenderIF,i as animateLabelChange,M as datesClassName,V as default,p as fmtMonthDay,g as getDecadesFromYear,y as getMaxDayOfMonth,s as getMiMaxYear,m as getMonthName,v as getPreNextOfMonth,h as getRealYearMonth,c as isNil,f as isOverCompareDate,C as keyMonths,b as labelMonths,E as labelWeekDays,d as padZero,N as parseYearMonthDateToNumber,k as parseYearMonthToNumber,u as toMatrix};
